<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ocean Cam</title>
    <link 
      rel = "stylesheet"
      type = "text/css"
      href = "styles.css"/>
  </head>
  <body id="bg">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="jsmpeg.min.js"></script>
    <script type="text/javascript">

      function httpGetAsync(url, callback) {
          var xmlHttp = new XMLHttpRequest();
          xmlHttp.onreadystatechange = function() { 
              if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                callback(xmlHttp.responseText);
          }
          xmlHttp.open("GET", url, true); // true for asynchronous 
          xmlHttp.send(null);
      }

      function processM3U8(data) {
          var results = data.trim().split("\n");
          result = 'https://s52.ipcamlive.com/streams/345ef0477c421b817/' + results[results.length - 1];
          console.log(result);
          httpGetAsync(result, processTS);
          //var player = new JSMpeg.Player(result, {loop: true});
          //$("#hack").append("<div class='jsmpeg' data-url=" + result + "></div>");
      }

      function processTS(data) {
          console.log(data);
      }

      httpGetAsync("https://s52.ipcamlive.com/streams/345ef0477c421b817/stream.m3u8", processM3U8);
    </script>

    <div class='jsmpeg' data-url="stream.ts"></div>

    <div id="content">
      <br>
      <div id="title">
        <img src="https://i.redd.it/nkplhm1in6s11.png" width="90" height="60">
        &nbsp;
        OCEAN CITY, MD
      </div>
      <div class="buttons-area">
        <div class="btn-group">
          <a href="Weather.html">Weather</a>
          <a href="OceanCam.html">Beach Cams</a>
          <a href="BarCams.html">Bar Cams</a>
        </div>
      </div>
      <div class="container">
        <div id="heading">Inlet</div>
        <div class="embed-box">
          <iframe
            src="http://ocsurfcam.com/lifesavingcamera.html"
            class="camera"
            frameborder="0"
            scrolling="no">
          </iframe>
        </div>
      </div>
      <div class="container">
        <div id="heading">2nd Street</div>
        <div class="embed-box short">
          <iframe
            src="http://cdn.fullcityservers.com/livestream/streams/harrisongroup/plimplazaocean.html"
            class="camera"
            frameborder="0"
            scrolling="no">
          </iframe>
        </div>
      </div>
      <div class="container">
        <div id="heading">3rd Street</div>
        <div class="embed-box short">
          <iframe
            src="http://cdn.fullcityservers.com/livestream/streams/parkplace/boardwalk.html"
            class="camera"
            frameborder="0"
            scrolling="no">
          </iframe>
        </div>
      </div>
      <div class="container">
        <div id="heading">14th Street</div>
        <!--
        <div class="embed-box">
          <iframe
            src="https://www.youtube.com/embed/i1Nz_wPvmWo?rel=0;&autoplay=1&mute=1"
            class="camera"
            frameborder="0"
            include>
          </iframe>
        </div>
        -->
        <div class="embed-box short">
          <iframe
            src="http://cdn.fullcityservers.com/livestream/streams/phillips/beachplaza.html"
            class="camera"
            frameborder="0"
            include>
          </iframe>
        </div>
      </div>
      <div class="container">
        <div id="heading">36th Street</div>
        <div class="embed-box">
          <iframe
            src="http://ocsurfcam.com/castlecamera.html"
            class="camera"
            frameborder="0"
            scrolling="no">
          </iframe>
        </div>
      </div>
      <div class="container">
        <div id="heading">54th Street</div>
        <div class="embed-box">
          <iframe
            src="http://ocsurfcam.com/middlecamera.html"
            class="camera"
            frameborder="0"
            scrolling="no">
          </iframe>
        </div>
      </div>      
      <div class="container">
        <div id="heading">91st Street</div>
        <div class="embed-box short" id="hack">
          
        </div>
      </div>
      <div class="container">
        <div id="heading">101st Street</div>
        <div class="embed-box short">
          <a href="https://oceancitylive.com/ocean-city-webcams/ocean-city-sunrise-beach-cam/">
            <img
              src="https://s26.ipcamlive.com/streams/1a5d00c886265689a/snapshot.jpg"
              class="camera">
            </img>
          </a>
        </div>
      </div>
      <div id="credits">
        Developed by Chris Monteferrante 2019.<br>
        Cameras taken from OCSurfCam.com & OceanCityLive.com.<br>
        Not for commercial purposes.<br>
      </div>
      <br>
    </div>
  </body>
</html>
